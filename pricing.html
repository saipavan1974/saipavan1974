<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Computer & Laptop Repair Pricing Preston | BPK Computer Services</title>
  <meta name="description" content="BPK Computer Services pricing in Preston: laptop screen replacement, charging socket repair, virus removal, Windows installation, SSD/RAM upgrades, and home IT support. Call or WhatsApp for a quote." />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    :root{
      --bg: #f6f8fc;
      --text: #0f172a;
      --muted: #475569;
      --brand-navy: #071e2e;
      --brand-blue: #0b2f4a;
      --brand-cyan: #0ea5e9;
      --brand-teal: #10b981;
      --brand-purple: #7c3aed;

      --card: #ffffff;
      --border: #e5e7eb;
      --shadow: 0 12px 30px rgba(2,6,23,0.12);
      --shadow-soft: 0 8px 20px rgba(2,6,23,0.08);
      --radius: 18px;

      --chip: rgba(255,255,255,0.10);
      --chip-border: rgba(255,255,255,0.18);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
    body { background: var(--bg); color: var(--text); }

    /* =========================
       Header / Nav
       ========================= */
    header{
      background: linear-gradient(180deg, rgba(7,30,46,1) 0%, rgba(11,47,74,0.96) 100%);
      color:#fff;
      padding: 16px 18px;
      position: sticky;
      top: 0;
      z-index: 1000;
      border-bottom: 1px solid rgba(255,255,255,0.10);
      backdrop-filter: blur(8px);
    }
    .topbar{
      max-width: 1180px;
      margin: 0 auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      flex-wrap: wrap;
    }
    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width: 260px;
    }
    .brand img{
      width: 54px;
      height: 54px;
      border-radius: 50%;
      background: #fff;
      object-fit: contain;
    }
    .brand .title{ line-height: 1.15; }
    .brand .title strong{
      font-size: 1.15rem;
      display:block;
      letter-spacing: 0.2px;
    }
    .brand .title span{
      font-size: 0.86rem;
      opacity: .9;
      font-weight: 600;
    }

    nav.nav{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      align-items:center;
      justify-content:flex-end;
      flex: 1;
    }
    .nav a{
      color:#eaf2ff;
      text-decoration:none;
      font-weight:800;
      font-size: 0.95rem;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(255,255,255,0.08);
      display:inline-flex;
      align-items:center;
      gap: 8px;
      transition: transform .15s ease, background .2s ease, border .2s ease;
      white-space: nowrap;
    }
    .nav a:hover{
      background: rgba(255,255,255,0.14);
      border-color: rgba(255,255,255,0.26);
      transform: translateY(-1px);
    }
    .nav a.active{
      background: rgba(255,255,255,0.16);
      border-color: rgba(255,255,255,0.30);
    }
    .nav a.primary{
      color:#fff;
      border: 1px solid rgba(255,255,255,0.15);
      background: linear-gradient(135deg, var(--brand-cyan) 0%, var(--brand-purple) 55%, var(--brand-teal) 100%);
      box-shadow: 0 12px 26px rgba(14,165,233,0.18);
    }
    .nav a.primary:hover{ filter: brightness(1.03); }

    /* =========================
       Hero
       ========================= */
    .hero{
      background:
        radial-gradient(900px 500px at 15% 25%, rgba(14,165,233,0.25), transparent 60%),
        radial-gradient(900px 500px at 85% 0%, rgba(124,58,237,0.25), transparent 60%),
        radial-gradient(900px 500px at 80% 85%, rgba(16,185,129,0.18), transparent 60%),
        linear-gradient(180deg, rgba(7,30,46,1) 0%, rgba(6,21,32,1) 100%);
      color: #fff;
      padding: 64px 20px 44px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      text-align: center;
    }
    .hero-inner{ max-width: 1180px; margin: 0 auto; }
    .hero h1{
      font-size: 2.55rem;
      line-height: 1.12;
      letter-spacing: -0.6px;
      margin-bottom: 10px;
    }
    .hero p{
      color: rgba(255,255,255,0.92);
      font-size: 1.05rem;
      line-height: 1.7;
      max-width: 75ch;
      margin: 0 auto 16px;
    }

    .hero-actions{
      display:flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content:center;
      margin-top: 8px;
    }
    .btn{
      border: none;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap: 10px;
      font-weight: 900;
      padding: 12px 16px;
      border-radius: 14px;
      transition: transform .15s ease, filter .2s ease;
      white-space: nowrap;
    }
    .btn:hover{ transform: translateY(-1px); filter: brightness(1.03); }
    .btn-primary{
      color:#fff;
      background: linear-gradient(135deg, var(--brand-cyan) 0%, var(--brand-purple) 58%, var(--brand-teal) 100%);
      box-shadow: 0 14px 28px rgba(124,58,237,0.16);
    }
    .btn-ghost{
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.18);
      color:#fff;
    }

    /* Banner */
    .banner{
      background: linear-gradient(90deg, rgba(14,165,233,0.18), rgba(124,58,237,0.18), rgba(16,185,129,0.18));
      border-top: 1px solid rgba(255,255,255,0.10);
      border-bottom: 1px solid rgba(255,255,255,0.10);
      background-color: var(--brand-blue);
      color: #fff;
      padding: 10px 0;
    }

    /* Content container */
    .container { max-width: 1180px; margin: 0 auto; padding: 56px 20px; }

    .section-title { text-align: center; font-size: 2em; margin-bottom: 10px; }
    .section-desc {
      text-align: center;
      color: var(--muted);
      max-width: 980px;
      margin: 0 auto 30px;
      line-height: 1.65;
    }

    /* Table block */
    .pricing-block {
      background: var(--card);
      border-radius: 18px;
      padding: 18px;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border);
      overflow: auto;
      margin-bottom: 28px;
    }
    table { width: 100%; border-collapse: collapse; min-width: 780px; }
    table, th, td { border: 1px solid #d1d5db; }
    th, td { padding: 12px; text-align: left; vertical-align: top; }
    th {
      background: linear-gradient(135deg, var(--brand-cyan), var(--brand-purple));
      color: #fff;
      border-color: rgba(255,255,255,0.25);
    }
    td{ background: #fff; }

    .note { color: var(--muted); line-height: 1.6; margin-top: 10px; font-size: 0.95em; }

    /* Service cards */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 18px;
      max-width: 1100px;
      margin: 0 auto;
    }
    .card {
      background: var(--card);
      padding: 20px;
      border-radius: 16px;
      box-shadow: var(--shadow-soft);
      transition: transform 0.22s ease, box-shadow 0.22s ease;
      text-align: left;
      border: 1px solid var(--border);
    }
    .card i { font-size: 1.55em; margin-bottom: 10px; color: var(--brand-blue); }
    .card:hover { transform: translateY(-4px); box-shadow: var(--shadow); }
    .card p { color: var(--muted); line-height: 1.55; }

    /* =========================
       Reviews (your existing style)
       ========================= */
    .reviews { background: #ffffff; padding: 60px 20px; text-align: center; }
    .reviews h2 { margin-bottom: 10px; font-size: 2em; }
    .reviews .desc { max-width: 900px; margin: 0 auto 30px; color: var(--muted); line-height: 1.6; }

    .review-wrap {
      max-width: 1100px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap: 18px;
    }
    .review-card {
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 18px;
      text-align: left;
      box-shadow: var(--shadow-soft);
    }
    .review-card h3 { color: var(--brand-blue); margin-bottom: 10px; }

    .review-form { display: grid; gap: 12px; }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

    .review-form label { font-weight: 700; font-size: 0.95em; color: #111827; }
    .review-form input, .review-form textarea {
      width: 100%;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid #d1d5db;
      outline: none;
      background: #fff;
    }
    .review-form textarea { min-height: 110px; resize: vertical; }

    .review-actions { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }

    .review-btn {
      color:#fff;
      padding: 11px 16px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      font-weight: 900;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      transition: filter .2s ease, transform .15s ease;
      text-decoration: none;
      white-space: nowrap;
    }
    .review-btn:hover { filter: brightness(1.03); transform: translateY(-1px); }

    .review-btn.primary {
      background: linear-gradient(135deg, var(--brand-cyan), var(--brand-purple));
      box-shadow: var(--shadow-soft);
    }
    .review-btn.google { background: linear-gradient(135deg, #22c55e, #16a34a); }

    .review-muted { color: var(--muted); font-size: 0.92em; line-height: 1.5; }

    .star-picker { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
    .stars { display: inline-flex; gap: 6px; font-size: 1.3em; }
    .star { cursor: pointer; color: #d1d5db; transition: transform .15s ease, color .15s ease; user-select: none; }
    .star:hover { transform: translateY(-1px); }
    .star.active { color: #f1c40f; }

    .small-hint { font-size: 0.85em; color: #6b7280; margin-top: 4px; }

    .review-list { display: grid; gap: 12px; margin-top: 12px; }
    .user-review {
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
      box-shadow: var(--shadow-soft);
    }
    .user-review .top { display: flex; justify-content: space-between; gap: 10px; flex-wrap: wrap; align-items: center; }
    .user-review .name { font-weight: 1000; color: var(--brand-blue); }
    .user-review .meta { color: #6b7280; font-size: 0.9em; }
    .user-review .body { margin-top: 8px; color: #374151; line-height: 1.6; }

    .review-toast { display: none; margin-top: 10px; padding: 10px 12px; border-radius: 12px; font-weight: 700; }
    .review-toast.ok { display: block; background: #ecfdf5; border: 1px solid #a7f3d0; color: #065f46; }
    .review-toast.err { display: block; background: #fef2f2; border: 1px solid #fecaca; color: #991b1b; }

    /* Footer */
    .footer {
      background: linear-gradient(180deg, rgba(11,47,74,1) 0%, rgba(7,30,46,1) 100%);
      color: white;
      padding: 22px 20px;
      text-align: center;
      font-size: 0.92em;
      border-top: 1px solid rgba(255,255,255,0.08);
    }
    .footer .gdpr { margin-top: 10px; font-size: 0.85em; color: rgba(255,255,255,0.78); }

    /* Responsive */
    @media (max-width: 980px){
      nav.nav{ justify-content:flex-start; }
      .brand{ min-width: unset; }
      .review-wrap{ grid-template-columns: 1fr; }
      .form-row{ grid-template-columns: 1fr; }
      table{ min-width: 680px; }
    }
    @media (max-width: 520px){
      .nav a{ width: 100%; justify-content:center; }
      .hero h1{ font-size: 2.05rem; }
      .hero-actions .btn{ width: 100%; justify-content:center; }
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header>
    <div class="topbar">
      <div class="brand">
        <img src="logo.png" alt="BPK Logo" />
        <div class="title">
          <strong>BPK Computer Services</strong>
          <span>Computer & Laptop Repair ‚Ä¢ Preston</span>
        </div>
      </div>

      <nav class="nav">
        <a href="index.html"><i class="fas fa-house"></i> Home</a>
        <a href="index.html#services"><i class="fas fa-screwdriver-wrench"></i> Services</a>
        <a class="active" href="pricing.html"><i class="fas fa-tag"></i> Pricing</a>
        <a href="reviews.html"><i class="fas fa-star"></i> Reviews</a>
        <a href="shop.html"><i class="fas fa-cart-shopping"></i> Shop</a>

        <!-- Single strong CTA -->
        <a class="primary" href="https://wa.me/447818955500?text=Hi%20BPK%20Computer%20Services%2C%20I%20want%20to%20book%20a%20repair.%20Device%3A%20____%20Issue%3A%20____%20Location%3A%20Preston" target="_blank" rel="noopener">
          <i class="fas fa-calendar-check"></i> Book Repair
        </a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero" id="top">
    <div class="hero-inner">
      <h1>Repair Pricing in Preston</h1>
      <p>
        Clear, honest pricing for common repairs. Final cost can vary depending on device model and parts required ‚Äî
        message us on WhatsApp for a fast quote.
      </p>

      <div class="hero-actions">
        <a class="btn btn-primary"
           href="https://wa.me/447818955500?text=Hi%20BPK%20Computer%20Services%2C%20please%20quote%20me.%20Device%3A%20____%20Issue%3A%20____%20Model%3A%20____%20Location%3A%20Preston"
           target="_blank" rel="noopener">
          <i class="fab fa-whatsapp"></i> WhatsApp for a Quote
        </a>
        <a class="btn btn-ghost" href="tel:+447818955500">
          <i class="fas fa-phone"></i> Call: 07818 955 500
        </a>
      </div>
    </div>
  </section>

  <div class="banner">
    <marquee>‚úÖ Free diagnosis ‚Ä¢ ‚úÖ Transparent pricing ‚Ä¢ ‚úÖ Pickup & drop-off available (Preston & nearby) ‚Ä¢ ‚úÖ Warranty on repairs (where applicable)</marquee>
  </div>

  <main class="container">

    <!-- Quick highlights -->
    <h2 class="section-title">Common Repairs</h2>
    <p class="section-desc">
      Typical UK market prices for popular repairs. We‚Äôll always confirm the final quote after diagnosis.
      (Parts may affect the final price on screen/socket repairs.)
    </p>

    <div class="grid" style="margin-bottom:18px;">
      <div class="card">
        <i class="fas fa-laptop"></i>
        <h3>Laptop Screen Replacement</h3>
        <p>Cracked, flickering or no display ‚Äî replacement for most major brands.</p>
      </div>
      <div class="card">
        <i class="fas fa-plug"></i>
        <h3>Charging Socket Repair</h3>
        <p>Loose charging port or not charging ‚Äî repair/replacement depending on model.</p>
      </div>
      <div class="card">
        <i class="fas fa-shield-virus"></i>
        <h3>Virus & Malware Removal</h3>
        <p>Full scan, removal, clean-up and performance checks.</p>
      </div>
      <div class="card">
        <i class="fab fa-windows"></i>
        <h3>Windows Install + Setup</h3>
        <p>Clean install with drivers, updates and setup included.</p>
      </div>
      <div class="card">
        <i class="fas fa-memory"></i>
        <h3>SSD / RAM Upgrades</h3>
        <p>Speed boost upgrades ‚Äî install, setup and testing.</p>
      </div>
      <div class="card">
        <i class="fas fa-house-laptop"></i>
        <h3>Home IT Support (10 miles)</h3>
        <p>On-site help for Wi-Fi, PC issues, printer setup and more.</p>
      </div>
    </div>

    <!-- Market pricing table -->
    <section class="pricing-block" aria-label="Repair service pricing table">
      <h3 style="color:var(--brand-blue); margin-bottom:10px;"><i class="fas fa-tag"></i> Market Pricing (Typical)</h3>

      <table style="min-width: 800px;">
        <thead>
          <tr>
            <th>Service</th>
            <th>What‚Äôs included</th>
            <th>Typical market price</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><b>Diagnosis</b></td>
            <td>Assessment + fault finding</td>
            <td><b>FREE</b></td>
          </tr>

          <tr>
            <td><b>Laptop Screen Replacement</b></td>
            <td>Diagnosis + screen fitting + testing (price varies by model/parts)</td>
            <td><b>From ¬£110</b></td>
          </tr>

          <tr>
            <td><b>Charging Socket Repair</b></td>
            <td>Port repair/replacement depending on board design (varies by model/parts)</td>
            <td><b>From ¬£80</b></td>
          </tr>

          <tr>
            <td><b>Virus / Malware Removal</b></td>
            <td>Deep scan + removal + optimisation + safety checks</td>
            <td><b>¬£70</b></td>
          </tr>

          <tr>
            <td><b>Windows Install + Setup</b></td>
            <td>Windows 10/11 install + drivers + updates + setup</td>
            <td><b>¬£99</b></td>
          </tr>

          <tr>
            <td><b>SSD Upgrade (labour)</b></td>
            <td>Install + clone or fresh install + optimisation (excluding SSD cost)</td>
            <td><b>¬£70</b></td>
          </tr>

          <tr>
            <td><b>RAM Upgrade (labour)</b></td>
            <td>Compatibility check + installation (excluding RAM cost)</td>
            <td><b>¬£35</b></td>
          </tr>

          <tr>
            <td><b>Data Backup & Transfer</b></td>
            <td>Backup to customer-supplied drive + transfer/setup</td>
            <td><b>¬£50</b></td>
          </tr>

          <tr>
            <td><b>Data Recovery (basic)</b></td>
            <td>Attempted recovery from accessible drives (complex cases quoted)</td>
            <td><b>From ¬£95</b></td>
          </tr>

          <tr>
            <td><b>Home Service Visit</b></td>
            <td>Within 10 miles ‚Äî first hour included</td>
            <td><b>¬£65</b></td>
          </tr>

          <tr>
            <td><b>Combo Offer</b></td>
            <td>Windows install + drivers/updates + malware clean</td>
            <td><b>¬£105</b></td>
          </tr>
        </tbody>
      </table>

      <div class="note">
        Note: ‚ÄúFrom‚Äù prices depend on device model and parts availability. We confirm final pricing after diagnosis.
      </div>
    </section>

  </main>

  <!-- =========================
       Reviews Section
       ========================= -->
  <section class="reviews" id="reviews">
    <h2>Leave a Review</h2>
    <div class="desc">
      Your feedback helps us improve and helps other customers choose BPK.
      (If you prefer, you can also leave a Google review using the link below.)
    </div>

    <div class="review-wrap">
      <!-- Left: Review Form -->
      <div class="review-card">
        <h3><i class="fas fa-pen-to-square"></i> Submit your review</h3>

        <form class="review-form" id="reviewForm">
          <div class="form-row">
            <div>
              <label for="reviewName">Name</label>
              <input id="reviewName" name="name" type="text" placeholder="Your name" required />
            </div>
            <div>
              <label for="reviewEmail">Email (optional)</label>
              <input id="reviewEmail" name="email" type="email" placeholder="name@email.com" />
            </div>
          </div>

          <div>
            <label>Rating</label>
            <div class="star-picker">
              <div class="stars" id="starRow" aria-label="Select rating out of 5">
                <span class="star" data-value="1" aria-label="1 star">‚òÖ</span>
                <span class="star" data-value="2" aria-label="2 stars">‚òÖ</span>
                <span class="star" data-value="3" aria-label="3 stars">‚òÖ</span>
                <span class="star" data-value="4" aria-label="4 stars">‚òÖ</span>
                <span class="star" data-value="5" aria-label="5 stars">‚òÖ</span>
              </div>
              <span class="review-muted" id="ratingText">No rating selected</span>
            </div>
            <div class="small-hint">Tip: click stars to set your rating.</div>
            <input type="hidden" id="reviewRating" name="rating" value="" required />
          </div>

          <div>
            <label for="reviewMessage">Your review</label>
            <textarea id="reviewMessage" name="message" placeholder="Tell us about your experience‚Ä¶" required></textarea>
          </div>

          <label class="review-muted" style="display:flex; gap:10px; align-items:flex-start;">
            <input type="checkbox" id="reviewConsent" required style="margin-top:4px;" />
            I confirm this review is genuine and I‚Äôm happy for it to be shown on the website.
          </label>

          <div class="review-actions">
            <button type="submit" class="review-btn primary">
              <i class="fas fa-paper-plane"></i> Submit Review
            </button>

            <a class="review-btn google"
               href="https://www.google.com/search?q=BPK%20Computer%20Repair%20and%20Services%20reviews"
               target="_blank" rel="noopener">
              <i class="fab fa-google"></i> Leave Google Review
            </a>
          </div>

          <div id="reviewToast" class="review-toast"></div>
          <div class="review-muted" style="margin-top:8px;">
            Reviews are moderated for spam. If you submitted and don‚Äôt see it immediately, it may still be processing.
          </div>
        </form>
      </div>

      <!-- Right: Recently Submitted Reviews -->
      <div class="review-card">
        <h3><i class="fas fa-comments"></i> Recent Website Reviews</h3>
        <div class="review-muted">
          These are reviews submitted via this website form.
        </div>
        <div class="review-list" id="reviewList"></div>
      </div>
    </div>
  </section>

  <footer class="footer">
    &copy; 2026 BPK Computer Services. All rights reserved.
    <div class="gdpr">We comply with GDPR and handle your data responsibly.</div>

    <div style="margin-top: 15px;">
      <strong>üìç Location:</strong> Preston, UK<br />
      <strong>üïí Business Hours:</strong> Saturday & Sunday, 10:00 AM ‚Äì 10:30 PM
    </div>

    <div style="margin-top: 15px;">
      <a href="https://www.facebook.com/share/1ASn3THFMY/?mibextid=wwXIfr" target="_blank" rel="noopener" style="color: #fff; margin: 0 10px; font-size: 1.5em;">
        <i class="fab fa-facebook"></i>
      </a>
      <a href="https://wa.me/447818955500" target="_blank" rel="noopener" style="color: #25D366; margin: 0 10px; font-size: 1.5em;">
        <i class="fab fa-whatsapp"></i>
      </a>
      <a href="https://maps.app.goo.gl/MU78urvGdNf8Wwbf6" target="_blank" rel="noopener" style="color: #fff; margin: 0 10px; font-size: 1.5em;">
        <i class="fas fa-map-marker-alt"></i>
      </a>
    </div>

    <div style="margin-top: 20px;">
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2391.7494776583856!2d-2.708851984163432!3d53.75864927995644!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x487ba3d13a3b9c3f%3A0xd2e6595c99384292!2sBPK%20Computer%20Repair%20and%20Services!5e0!3m2!1sen!2suk!4v1687578671670!5m2!1sen!2suk"
        width="100%"
        height="200"
        style="border:0; border-radius: 14px;"
        allowfullscreen=""
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
  </footer>

  <!-- Reviews Script (same as your original) -->
  <script>
    // OPTIONAL: Google Sheets endpoint (Apps Script Web App URL)
    // Paste your deployed Apps Script URL here:
    // const REVIEW_ENDPOINT = "https://script.google.com/macros/s/XXXX/exec";
    const REVIEW_ENDPOINT = "";

    const reviewForm = document.getElementById("reviewForm");
    const reviewList = document.getElementById("reviewList");
    const reviewToast = document.getElementById("reviewToast");

    const starRow = document.getElementById("starRow");
    const ratingText = document.getElementById("ratingText");
    const ratingInput = document.getElementById("reviewRating");

    function setToast(type, msg) {
      if (!reviewToast) return;
      reviewToast.className = "review-toast " + (type === "ok" ? "ok" : "err");
      reviewToast.textContent = msg;
    }

    function clearToast() {
      if (!reviewToast) return;
      reviewToast.className = "review-toast";
      reviewToast.textContent = "";
    }

    function renderStars(value) {
      if (!starRow) return;
      const stars = starRow.querySelectorAll(".star");
      stars.forEach((s) => {
        const v = Number(s.dataset.value);
        s.classList.toggle("active", v <= value);
      });
    }

    function ratingLabel(value) {
      const labels = {1:"Poor",2:"Fair",3:"Good",4:"Very Good",5:"Excellent"};
      return labels[value] || "No rating selected";
    }

    if (starRow) {
      starRow.addEventListener("click", (e) => {
        const star = e.target.closest(".star");
        if (!star) return;
        const value = Number(star.dataset.value);
        if (ratingInput) ratingInput.value = String(value);
        if (ratingText) ratingText.textContent = `${value}/5 ‚Äî ${ratingLabel(value)}`;
        renderStars(value);
        clearToast();
      });
    }

    const LS_KEY = "bpk_site_reviews_v1";

    function loadLocalReviews() {
      try {
        const raw = localStorage.getItem(LS_KEY);
        return raw ? JSON.parse(raw) : [];
      } catch {
        return [];
      }
    }

    function saveLocalReview(review) {
      const all = loadLocalReviews();
      all.unshift(review);
      localStorage.setItem(LS_KEY, JSON.stringify(all.slice(0, 12)));
    }

    function escapeHTML(str) {
      return String(str)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    function renderReviewList() {
      const reviews = loadLocalReviews();
      if (!reviewList) return;

      if (reviews.length === 0) {
        reviewList.innerHTML = `
          <div class="user-review">
            <div class="meta">No website reviews yet. Be the first to leave one! ‚≠ê</div>
          </div>
        `;
        return;
      }

      reviewList.innerHTML = reviews.map(r => {
        const stars = "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ".slice(0, r.rating) + "‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ".slice(0, 5 - r.rating);
        return `
          <div class="user-review">
            <div class="top">
              <div class="name">${escapeHTML(r.name)}</div>
              <div class="meta">${escapeHTML(stars)} ‚Ä¢ ${escapeHTML(r.date)}</div>
            </div>
            <div class="body">${escapeHTML(r.message)}</div>
          </div>
        `;
      }).join("");
    }

    async function submitReviewToEndpoint(payload) {
      const res = await fetch(REVIEW_ENDPOINT, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });
      if (!res.ok) throw new Error("Network error");
      return true;
    }

    if (reviewForm) {
      reviewForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        clearToast();

        const name = document.getElementById("reviewName")?.value.trim();
        const email = document.getElementById("reviewEmail")?.value.trim();
        const rating = Number(document.getElementById("reviewRating")?.value);
        const message = document.getElementById("reviewMessage")?.value.trim();
        const consent = document.getElementById("reviewConsent")?.checked;

        if (!name || !message || !consent || !rating || rating < 1 || rating > 5) {
          setToast("err", "Please fill in your name, rating (stars), review message, and consent.");
          return;
        }

        const payload = {
          name,
          email,
          rating,
          message,
          date: new Date().toLocaleDateString("en-GB", { day:"2-digit", month:"short", year:"numeric" }),
          page: location.pathname || "/",
          source: "website_form"
        };

        try {
          if (REVIEW_ENDPOINT && REVIEW_ENDPOINT.startsWith("http")) {
            await submitReviewToEndpoint(payload);
          }

          saveLocalReview(payload);
          renderReviewList();

          reviewForm.reset();
          if (ratingInput) ratingInput.value = "";
          if (ratingText) ratingText.textContent = "No rating selected";
          renderStars(0);

          setToast("ok", "Thank you! Your review has been submitted.");
        } catch (err) {
          saveLocalReview(payload);
          renderReviewList();
          setToast("ok", "Submitted locally. (To store in Google Sheets, add your Apps Script URL in the code.)");
        }
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      renderReviewList();
      renderStars(0);
    });
  </script>
</body>
</html>
